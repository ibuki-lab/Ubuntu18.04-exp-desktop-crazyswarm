# フォーメーション兼衝突回避実験手順

### 0. 用意するもの
- 6台(1番，2番，3番，5番，6番，13番)のCrazyflie
- Motive 搭載 Windows Desktop PC
- ROS    搭載 Ubuntu Desktop PC

### 1. ハードウェアセットアップ
- Windows PCとUbuntu PCを起動
- 6台のCrazyflie を起動
- 実験フィールドに以下のようにCrazyflieを配置する．
          |cf3  cf2  cf1　　
          |                 窓
----------------cf6--cf5
          |                 窓
          |         cf13
　      実験PC

### 2. ソフトウェアセットアップ

Windows PCにて
- Desktopに置かれてるキャリブレーションファイルから最新日付フォルダにあるset Grandと書いてあるキャリブレーションファイルをダブルクリック
- Motiveが起動したらウィンドウ上部のtools/Streeming Painを選択して，設定内容をこのフォルダにある`Streeming_Pain_setting.jpg`と同じにする．

### 3. ターミナルから実験スタート
Ubuntu PCにて
- 左側のタスクバーからvsCodeを選択
- ctrl-shift-@を1回，ctrl-shift-5を2回押す．
  terminalが3つ出てくる

- terminal 1では，
    `cd ~/crazyswarm/ros_ws/src/crazyswarm/scripts`
    `python chooser.py`
    を実行
    新しくウィンドウが表示されるので，cf1,cf2,cf3,cf5,cf6,cf13にチェックを入れる．
    ウィンドウ下部の[Battery]をクリックして黄色もしくは赤で数字が表示されている場合は充電して黒い数字で表示されるまで待つ．
    充電できたら，フィールドに正しく配置された状態でウィンドウ下部の[reboot]をクリック

- terminal 2では．
    `roslaunch crazyswarm hover_swarm.launch`を実行
    rvisに6台のCrazyflieが配置したとおりに表示されればOK

- terminal 3では，
    `cd ~/crazyswarm/ros_ws/src/crazyswarm/consensus_control`
    `python consensus_ctrl_formation.py`
    を実行
    実行時間を入力するように要求されるので[20]と打つ

    実験スタート

